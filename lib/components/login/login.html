<!DOCTYPE html>
<link rel="import" href="../../../../packages/polymer/polymer.html">
<link rel="import" href="../../../../packages/couclient/toolkit/toolkit.html">

<polymer-element name="ur-login" newuser="false" timedout="false">
	<template>
		<link rel="stylesheet" href="login.css">

		<ur-panel class="splash" id="user-login">
			<img src="logo.svg" class="logo"><br>

			<template if="{{loggedIn}}">
				<span class="greeting">It's good to see you, {{username}}</span>
			</template>

			<template if="{{!newUser && !newSignup && !loggedIn}}">
				<div on-keydown="{{loginAttempt}}">
					<label>Email<input type="email" value="{{email}}"></label>
					<label>Password<input type="password" value="{{password}}"></label>
					<ur-button big="true" class="{{waiting?'waiting':''}}" on-click="{{loginAttempt}}">Login</ur-button>
					<br>
					<ur-button theme="light" provider="google" on-click="{{oauthLogin}}"><i class="fa fa-google"></i></ur-button>
					<ur-button theme="light" provider="twitter" on-click="{{oauthLogin}}"><i class="fa fa-twitter"></i></ur-button>
					<ur-button theme="light" provider="facebook" on-click="{{oauthLogin}}"><i class="fa fa-facebook"></i></ur-button>
					<ur-button theme="light" provider="github" on-click="{{oauthLogin}}"><i class="fa fa-github"></i></ur-button>
					<div>OR</div>
					<ur-button on-click="{{signup}}">Signup</ur-button>
				</div>
			</template>

			<template if="{{!newUser && newSignup && !loggedIn}}">
				<div on-keydown="{{verifyEmail}}">
					<div>Enter an email address to get started</div>
					<label>Email<input type="email" value="{{newEmail}}"></label>
					<ur-button big="true" class="{{waiting?'waiting':''}}" on-click="{{verifyEmail}}">Send Confirmation</ur-button>
					<template if="{{waiting}}">
						<div>Please check your email</div>
					</template>
				</div>
			</template>

			<template if="{{timedout}}">
				<div>
					<span class="greeting">
					Oh no!<br>
					Looks like the server is a bit slow. <br>
					Please check back another time. :(
					</span><br><br>
				</div>
			</template>

			<template if="{{newUser}}">
				<div on-keydown="{{usernameSubmit}}">
					<div class="greeting">Hey, a new face!</div>
					<div>What do you want to be called?</div><br>
					<input type="text" value="{{newUsername}}" disabled?="{{existingUser}}"><br>
					<input type="text" value="{{newEmail}}" disabled>
					<input type="password" value="{{newPassword}}">
					<ur-button theme="success" on-click="{{usernameSubmit}}">Submit</ur-button>
					<div>(You can always change your name later on.)</div>
				</div>
			</template>

		</ur-panel>
	</template>
	<script type="application/dart" src="login.dart"></script>
</polymer-element>